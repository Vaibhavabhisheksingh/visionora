<% layout("/layouts/boilerplate") %>
<div class="category-cards-wrapper py-3 bg-white position-relative mt-3">
  <!-- Left Scroll Button -->
  <button class="scroll-btn left-btn">
    <i class="fa-solid fa-chevron-left"></i>
  </button>

  <ul class="category-menu-horizontal d-flex mb-0 px-2 py-1" id="scrollMenu">
    <li>
      <a href="/listings/allProducts" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-box me-2"></i> Products
      </a>
    </li>
    <li>
      <a href="/listings/male" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-person me-2"></i> Male
      </a>
    </li>
    <li>
      <a href="/listings/female" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-person-dress me-2"></i> Female
      </a>
    </li>
    <li>
      <a href="/listings/kids" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-child me-2"></i> Kids
      </a>
    </li>
    <li>
      <a href="/listings/lens" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-eye-dropper me-2"></i> Lens
      </a>
    </li>
    <li>
      <a href="/listings/others" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-ellipsis-h me-2"></i> Others
      </a>
    </li>
    <li>
      <a href="/specialists" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-user-doctor me-2"></i> Specialists
      </a>
    </li>
    <li>
      <a href="/orders" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-bag-shopping me-2"></i> Orders
      </a>
    </li>
    <li>
      <a href="/appointments" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-calendar-check me-2"></i> Appointments
      </a>
    </li>
    <li>
      <a href="/cart" class="category-pill d-flex align-items-center text-dark text-decoration-none px-3 py-2">
        <i class="fa-solid fa-cart-shopping me-2"></i> Cart
      </a>
    </li>
  </ul>

  <!-- Right Scroll Button -->
  <button class="scroll-btn right-btn">
    <i class="fa-solid fa-chevron-right"></i>
  </button>
</div>



  <!-- Cards Section -->
<div class="cards-container mt-4">
    <!-- Products cards -->
     <h4 class="text-center fw-bold mb-4"> Products</h4>
    <div class="row g-4">
      <% allListings.forEach(listing => { %>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm">
          <img src="<%= listing.image.url %>" alt="<%= listing.title %>" class="card-img-top" style="height:230px; object-fit:cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-semibold"><%= listing.title %></h5>
            <p class="text-muted small mb-2"><%= listing.description.substring(0,70) %>...</p>
            <p class="fw-bold text-primary mb-3">₹<%= listing.price.toLocaleString("en-IN") %></p>
            <a href="/listings/<%= listing._id %>" class="btn btn-dark mt-auto w-100 rounded-pill">View Details</a>
          </div>
        </div>
      </div>
      <% }) %>
    </div>
    <div class="text-center mt-4">
        <a href="/listings/allProducts" class="btn btn-outline-dark fw-bold rounded-pill px-4">
            View All Products
        </a>
    </div>
</div>
<hr>
<div class="cards-container mt-4">
    <!-- Specialists cards (optional) -->
     <h4 class="text-center fw-bold mb-4"> Eye Specialists</h4>
    <div class="row g-4 mt-4">
      <% allSpecialists.forEach(s => { %>
      <div class="col-12 col-sm-6 col-md-4 col-lg-3">
        <div class="card h-100 shadow-sm">
          <img src="<%= s.image.url %>" alt="<%= s.name %>" class="card-img-top" style="height:230px; object-fit:cover;">
          <div class="card-body d-flex flex-column">
            <h5 class="card-title fw-semibold"><%= s.name %></h5>
            <p class="text-muted small mb-2"><%= s.specialization %></p>
            <p class="fw-bold text-primary mb-3">₹<%= s.fees %></p>
            <a href="/specialists/<%= s._id %>" class="btn btn-success mt-auto w-100 rounded-pill">Take Appointment</a>
          </div>
        </div>
      </div>
      <% }) %>
    </div>
    
    <div class="text-center mt-4">
        <a href="/specialists" class="btn btn-outline-dark fw-bold rounded-pill px-4">
            View All Specialists
        </a>
    </div>
  </div>

</div>



<script>

    const menu = document.getElementById("scrollMenu");
  const leftBtn = document.querySelector(".left-btn");
  const rightBtn = document.querySelector(".right-btn");

  leftBtn.addEventListener("click", () => {
    menu.scrollBy({ left: -200, behavior: "smooth" });
  });

  rightBtn.addEventListener("click", () => {
    menu.scrollBy({ left: 200, behavior: "smooth" });
  });

</script>